\documentclass[a4paper,12pt]{book}

%%%%%%%%%%%%%%%%%%%%%
% Front page
%%%%%%%%%%%%%%%%%%%%%
\input{doc_frontpage}
%%%%%%%%%%%%%%%%%%%%%
% Libraries
%%%%%%%%%%%%%%%%%%%%%
\input{doc_libraries}
%%%%%%%%%%%%%%%%%%%%%
% Macros
%%%%%%%%%%%%%%%%%%%%%
\input{doc_makros}

\usepackage{tabularx} % in the preamble

\begin{document}
\title{S4-VHDL Specifications}
\author{Nils Schlegel, 32067\\Tara Jaishi, 32289}
\date{\today}
\maketitle %\tableofcontents

\setcounter{chapter}{0}


1 Product: IC{\_}4 \\
\begin{center}
\begin{tabularx}{\textwidth}{llX}
History \\
\cline{1-3}
Target Spec. & Current version: 0.1, 2020-11-9 \\
& Previous version: - \\
\cline{1-3}
& 06.11.2020 & General description added \\
& 06.11.2020 & Blockdiagram added \\
& 06.11.2020 & Functional description added \\
\end{tabularx} \\
\end{center}
1.1 General-description \\
IC{\_}4 is a single chip based application containing processing capabilities to detect and keep track of the amount of people in one room. It is part of a system solution to fullfill the covid-19-restrictions and  regulate the amount of people in an area. This solution is only meant for a chamber with only one doorway available to enter or to exit. \\
The IC{\_}4 is designed on a PGA prototype-board Max1000 with 10M16SAU169C8G Device on board.

\begin{center}\includegraphics[width=1\textwidth]{./top}\end{center}

\begin{center}
\begin{tabular}{lll}
rb{\_}i & reset & reset, active low \\
cp{\_}i & system clock & e.g. 10 MHz \\
s1{\_}i & light{\_}curtain s1 & log1: something passes \\
s2{\_}i & light{\_}curtain s2& log1: something passes \\
s3{\_}i & light{\_}curtain s3 & log1: something passes \\
%rb{\_}o & reset led & emits light, when reset is !active \\
grn{\_}o & LED, access garanted & Green LED, go ahead \\
red{\_}o & LED, stop, no entry & Red LED, stop, access denied \\
sdo{\_}o & serial data out & drives S3 or MC \\
sdv{\_}o & serial data valid & drives S3 or MC \\
stx{\_}o & serial transfer active & drives S3 or MC \\
txd{\_}o & serial out & to RS-232-driver,9k6,8N2,ASCII,to PC \\
snd{\_}o & sound signal & acoustic signal, to loudspeaker \\
\\
inc{\_}s & increment & increments head count when triggered \\
dec{\_}s & decrement & decrements head count when triggered \\
num{\_}s & number & contains the head count number \\
evh{\_}s & event & contains the current event \\
\end{tabular}
\end{center}

1.2 Functional-description \\
\\
HeadCount \\
Stores the current number of people in the room. It increments or decrements the number if needed.
\\
\\
EventHandler \\
It receives the signals from the light curtains and detects which event is triggered. Depending on the event it will play a sound, turn on a LED and create an output signal.
\\
\\
UniqueTime \\
This element is only counting the clock-cycles, to generate a unique timestamp.
\\
\\
UART \\
The connection to the RS232 is done by the UART. It takes the unique timestamp from the UART as well as the head count from the HeadCount and event type from the EventHandler, when a signal from the EventHandler is received.
\\
\\
3WireInterface \\
The IC{\_}3 can be connected by using the 3WireInterface. When it receives a signal from the EventHandler it should pass the head count and event type to the IC{\_}3.

\end{document}
